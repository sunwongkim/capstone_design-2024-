한라대학교 전기전자공학과 카페인 팀의 2024년도 캡스톤 디자인입니다.</br>
<h3>작품명: 스마트 도어락(ESP8266)</h3>
201920210 김재성</br>
202125003 김선웅
<hr>
<h3>개요</h3>
브라우저로 외부 네트워크(공인IP)에서 도어락을 제어할 수 있는 작품입니다. ESP8266의 웹서버와 포트포워딩 기술을 사용합니다
.
<h3>작동 화면(참고-WEB_UI.png)</h3>
<img src="/capstone_design/other/WEB_UI.png" width="200px"></img><br/>
<li>OPEN, LOCK 하이퍼링크로 도어락을 제어합니다.</li>
<li>“state:”에 현재 도어락 상태가 보여집니다.</li>
<li>현재 상태와 사용 기록이 “페이지를 새로고침할 때” 갱신됩니다.</li>
<hr>

<h3>작동 영상(참고- final_model.mp4)</h3>
https://github.com/sunwongkim/capstone_design-2024-/assets/87660440/0b9ae7a9-265d-4162-bf26-f8f879782b95
<li><b>작동 환경:</b> 와이파이를 사용하지 않고 모바일 데이터를 사용(외부 네트워크로 접속), 보조배터리로 전원 공급</li>
<li><b>작동 매커니즘:</b> 하이퍼링크로 도어락을 제어 – 근접 센서로 상태 인식 – 상태와 시간을 저장 – 새로고침하면 웹페이지에 현재 상태와 사용 기록 갱신</li>
<hr>

<h3>사용 부품</h3>
아두이노 보드(WeMos D1 R1), 서보모터(MG996R), 기울기센서(SW520D), 강화 유리문 상단 잠금장치

<h3>사용 기술</h3>
C++(아두이노), 웹서버(ESP8266), 포트포워딩, 고정 IP 할당, 현재 시간 조회(NTPClient라이브러리), 작동 기록 조회(Array)

<h3>기술 상세</h3>
<li><b>웹서버:</b> WeMos D1 R1보드에 내장된 ESP8266의 웹서버 기능을 사용합니다. 이 기술로 웹 브라우저를 이용해 도어락을 제어합니다.</li>
<li><b>포트포워딩:</b> 브라우저와 보드는 같은 WiFi 내에서만 도어락과 통신할 수 있으나, 포트포워딩 기술을 사용하면 외부 네트워크에서도 도어락과 통신할 수 있습니다. 인터넷과 웹 브라우저를 사용할 수 있는 환경이면 거리 제한 없이 어디서든 도어락을 제어할 수 있습니다.</li>
<li><b>고정 IP 할당:</b> 보드를 재부팅하거나 코드를 업로드해도 보드의 맨 뒤 IP가 바뀌지 않습니다. 보드 IP가 바뀔 경우 포트포워딩을 추가로 해야하는데 이를 방지합니다. 또한 여러 보드를 연결할 때 편리합니다. 이 기술을 적극 활용하면 도어락 외에 에어컨, 전등, CCTV 등 동시에 여러 기기를 편리하게 제어할 수 있습니다.(참고-multi_board.jpg)</li>
<li><b>작동 기록 조회:</b> 기록은 “[lock]2024/12/31 10:20:33” 형태로 배열에 저장됩니다. 배열이 가득차면 오래된 기록부터 덮어씌우기에 오버플로우 문제가 없으며 메모리도 절약합니다.</li>
<hr>

<h3>파일 설명</h3>
파일의 자세한 설명은 각 파일에 주석으로 적었습니다.</br>

<h5>코드</h5>
<li>smart_doorLock: 작품 코드입니다. 자세한 내용은 파일 안에 주석으로 적었습니다.</li>
<li>WiFiscan: 보드가 연결할 수 있는 WiFi를 스캔합니다.</li>
<li>array_test: 현재 시간과 상태를 저장하는 배열 코드를 따로 분리하였습니다.</li>

<h5>그 외 파일</h5>
<li>plan.png: 팀원들의 브레인 스토밍과 교내 네트워크 담당자의 첨삭으로 만들어진 초기 기획안</li>
<li>multi_board.jpg: 고정 IP 할당을 사용하여 2개의 보드를 하나의 WiFi에서 외부 네트워크(공인IP)로 제어</li>
<li>WEP_UI.png: 보드 통신 페이지에 접속시 보여지는 화면</li>
<li>early_model.mp4: 초기 모형, final_model.mp4: 최종 모형</li>
<hr>

<h3>마치며</h3>
웹서버, 포트포워딩, 고정IP 등 IoT에 관련된 여러 기술을 사용했습니다. 모형 테스트를 성공했기에 작동 매커니즘과 코드에는 문제가 없음을 확인했습니다. 시판되는 도어락을 분해하여 위 부품들과 결합하는 방식으로 보다 완성도 높은 모형을 추후에 만들 예정입니다.</br>
문의사항은 메일로 부탁드립니다.</br>
Sunwongkim0609@gmail.com

